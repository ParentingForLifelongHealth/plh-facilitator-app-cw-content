{
  "flow_type": "template",
  "flow_name": "follow_up_parent",
  "status": "released",
  "rows": [
    {
      "name": "show_group",
      "value": true
    },
    {
      "name": "group_id"
    },
    {
      "name": "first_name"
    },
    {
      "name": "last_name"
    },
    {
      "name": "parent_id"
    },
    {
      "name": "no_follow_up",
      "value": 0
    },
    {
      "name": "new_followup_count",
      "value": "@calc(@local.no_follow_up + 1)"
    },
    {
      "name": "one_two_list"
    },
    {
      "name": "two_three_list"
    },
    {
      "name": "three_four_list"
    },
    {
      "name": "four_five_list"
    },
    {
      "name": "five_six_list"
    },
    {
      "name": "last_week",
      "value": 2,
      "condition": "@calc(@local.one_two_list.includes(@local.group_id))",
      "comments": "@calc(@local.three_four_list.includes(Number(@local.group_id)) || @local.three_four_list.includes(\"@local.group_id\"))"
    },
    {
      "name": "last_week",
      "value": 3,
      "condition": "@calc(@local.two_three_list.includes(@local.group_id))"
    },
    {
      "name": "last_week",
      "value": 4,
      "condition": "@calc(@local.three_four_list.includes(@local.group_id))"
    },
    {
      "name": "last_week",
      "value": 5,
      "condition": "@calc(@local.four_five_list.includes(@local.group_id))"
    },
    {
      "name": "last_week",
      "value": 6,
      "condition": "@calc(@local.five_six_list.includes(@local.group_id))"
    },
    {
      "type": "begin_display_group",
      "parameter_list": "style: column",
      "style_list": "margin-bottom: 20px;"
    },
    {
      "type": "begin_display_group"
    },
    {
      "type": "begin_display_group",
      "parameter_list": "style: column",
      "style_list": "flex: 1"
    },
    {
      "type": "text",
      "value": "@local.first_name @local.last_name",
      "parameter_list": "style:emphasised",
      "style_list": "margin: 0px;",
      "exclude_from_translation": true
    },
    {
      "type": "begin_data_items",
      "value": "@data.parent_groups",
      "parameter_list": "filter: @local.group_id == @item.name",
      "condition": "@local.show_group",
      "comments": "Looks for the name of the parent group"
    },
    {
      "type": "text",
      "name": "group_name",
      "value": "@item.text",
      "style_list": "font-size: 16px; \ncolor: var(--ion-color-primary-700);\nmargin-top: -20px;\n",
      "condition": "@local.group_id == @item.name",
      "comments": "font-size: 16px; \ncolor: var(--ion-color-primary-700);\nmargin-top: -16px;\nmargin-bottom: 12px;\n"
    },
    {
      "type": "end_data_items"
    },
    {
      "type": "text",
      "value": "Missed the last 2 group sessions",
      "style_list": "font-size: 16px; \ncolor: var(--ion-color-primary-700);\nmargin-top: -12px;"
    },
    {
      "type": "end_display_group"
    },
    {
      "type": "button",
      "name": "submit_button",
      "value": "Followed up",
      "action_list": "click | set_data |\n_list_id: parents,\n_id: @local.parent_id,\nlast_follow_up: @calc(now()),\nno_follow_up: @local.new_followup_count,\nfollow_up_week: @local.last_week;"
    },
    {
      "type": "end_display_group"
    },
    {
      "type": "begin_display_group"
    },
    {
      "type": "button",
      "value": "<u>@global.how_to_follow_up</u>",
      "action_list": "click | go_to: library_article_follow_up_1;",
      "parameter_list": "variant: card; style: no-background short;",
      "style_list": "margin-top: -30px; margin-left: -22px;",
      "condition": "@local.new_followup_count == 1",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "value": "<u>@global.how_to_follow_up</u>",
      "action_list": "click | go_to: library_article_follow_up_2;",
      "parameter_list": "variant: card; style: no-background short;",
      "style_list": "margin-top: -30px; margin-left: -22px;",
      "condition": "@local.new_followup_count == 2",
      "exclude_from_translation": true
    },
    {
      "type": "button",
      "value": "<u>@global.how_to_follow_up</u>",
      "action_list": "click | go_to: library_article_follow_up_3;",
      "parameter_list": "variant: card; style: no-background short;",
      "style_list": "margin-top: -30px; margin-left: -22px;",
      "condition": "@local.new_followup_count == 3",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "spacer",
      "value": " ",
      "style_list": "flex: 1"
    },
    {
      "type": "end_display_group"
    },
    {
      "type": "end_display_group"
    }
  ]
}